{"ast":null,"code":"var _jsxFileName = \"/Users/baristna/Projects/tna/elements/dev/src/Select.js\";\nvar __jsx = React.createElement;\n// Packages\nimport React, { createRef, useState, useEffect } from 'react'; // Hooks\n\nimport { useOutsideClick } from '@btna/hooks'; // Helpers\n\nimport { classes as c } from '@btna/helpers';\nexport const Select = React.forwardRef((props, ref) => {\n  let {\n    options,\n    custom\n  } = props;\n  let selectElement = createRef();\n  let customMenu = createRef();\n  let {\n    0: selectedOption,\n    1: setSelectedOption\n  } = useState('please select');\n  let {\n    0: selectedIndex,\n    1: setSelectedIndex\n  } = useState(0);\n  let {\n    0: customMenuOpen,\n    1: setCustomMenuOpen\n  } = useState(false); // Handle Outside Click to Close custom menu\n\n  useOutsideClick(customMenu, () => {\n    setCustomMenuOpen(false);\n  }); // Run once to get selectedIndex to component\n\n  useEffect(() => {\n    setSelectedIndex(selectElement.current.selectedIndex);\n  }, []); // Run everytime selectedIndex has changed\n\n  useEffect(() => {\n    let currentOptions = selectElement.current.options;\n\n    if (selectedIndex >= 0) {\n      setSelectedOption(currentOptions[selectedIndex].text);\n    }\n  }, [selectedIndex]); // Get selected index from native element\n\n  const handleNativeOnChange = e => {\n    setSelectedIndex(e.currentTarget.selectedIndex);\n  }; // Get selected index from custom option and set to relevant places\n\n\n  const handleCustomOptionClick = index => {\n    setSelectedIndex(index);\n    selectElement.current.selectedIndex = index;\n  }; // Menu Toggle\n\n\n  const handleCustomMenuClick = () => {\n    setCustomMenuOpen(!customMenuOpen);\n  }; // Generate options\n\n\n  const genOptions = () => {\n    return options.map((item, index) => {\n      return __jsx(\"option\", {\n        key: index,\n        value: item.value,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, item.name);\n    });\n  }; // Generate custom options\n\n\n  const genCustomOptions = () => {\n    return options.map((item, index) => {\n      return __jsx(\"div\", {\n        key: index,\n        className: props.cssModule.option,\n        onClick: () => {\n          handleCustomOptionClick(index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, item.name);\n    });\n  }; // Render\n\n\n  return __jsx(\"div\", {\n    className: c(props.cssModule.select, [props.cssModule.custom, custom]),\n    onClick: () => handleCustomMenuClick(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: props.cssModule.label,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, selectedOption), __jsx(\"i\", {\n    className: c(props.iconModule['arrow_drop_down'], props.cssModule.icon),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), __jsx(\"select\", {\n    ref: selectElement,\n    onChange: e => handleNativeOnChange(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, genOptions()), custom && customMenuOpen && __jsx(\"div\", {\n    className: props.cssModule.options,\n    ref: customMenu,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, genCustomOptions()));\n});","map":{"version":3,"sources":["/Users/baristna/Projects/tna/elements/dev/src/Select.js"],"names":["React","createRef","useState","useEffect","useOutsideClick","classes","c","Select","forwardRef","props","ref","options","custom","selectElement","customMenu","selectedOption","setSelectedOption","selectedIndex","setSelectedIndex","customMenuOpen","setCustomMenuOpen","current","currentOptions","text","handleNativeOnChange","e","currentTarget","handleCustomOptionClick","index","handleCustomMenuClick","genOptions","map","item","value","name","genCustomOptions","cssModule","option","select","label","iconModule","icon"],"mappings":"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","sourcesContent":["// Packages\nimport React, { createRef, useState, useEffect } from 'react'\n\n// Hooks\nimport { useOutsideClick } from '@btna/hooks'\n\n// Helpers\nimport { classes as c } from '@btna/helpers'\n\nexport const Select =  React.forwardRef((props, ref) => {\n  let { options, custom } = props\n  let selectElement = createRef()\n  let customMenu = createRef()\n  let [selectedOption, setSelectedOption] = useState('please select')\n  let [selectedIndex, setSelectedIndex] = useState(0)\n  let [customMenuOpen, setCustomMenuOpen] = useState(false)\n\n  // Handle Outside Click to Close custom menu\n  useOutsideClick(customMenu, () => {\n    setCustomMenuOpen(false)\n  })\n\n  // Run once to get selectedIndex to component\n  useEffect(() => {\n    setSelectedIndex(selectElement.current.selectedIndex)\n  }, [])\n\n  // Run everytime selectedIndex has changed\n  useEffect(() => {\n    let currentOptions = selectElement.current.options\n    if (selectedIndex >= 0) {\n      setSelectedOption(currentOptions[selectedIndex].text)\n    }\n  }, [selectedIndex])\n\n  // Get selected index from native element\n  const handleNativeOnChange = (e) => {\n    setSelectedIndex(e.currentTarget.selectedIndex)\n  }\n\n  // Get selected index from custom option and set to relevant places\n  const handleCustomOptionClick = (index) => {\n    setSelectedIndex(index)\n    selectElement.current.selectedIndex = index\n  }\n\n  // Menu Toggle\n  const handleCustomMenuClick = () => {\n    setCustomMenuOpen(!customMenuOpen)\n  }\n\n  // Generate options\n  const genOptions = () => {\n    return options.map((item, index) => {\n      return <option key={index} value={item.value}>{item.name}</option>\n    })\n  }\n\n  // Generate custom options\n  const genCustomOptions = () => {\n    return options.map((item, index) => {\n      return <div\n        key={index}\n        className={props.cssModule.option}\n        onClick={() => { handleCustomOptionClick(index) }}\n      >\n        {item.name}\n      </div>\n    })\n  }\n\n  // Render\n  return (\n    <div className={c(props.cssModule.select, [props.cssModule.custom, custom])} onClick={() => handleCustomMenuClick() }>\n      <div className={props.cssModule.label}>{selectedOption}</div>\n      <i className={c(props.iconModule['arrow_drop_down'], props.cssModule.icon)} />\n\n      <select ref={selectElement} onChange={e => handleNativeOnChange(e) }>\n        {genOptions()}\n      </select>\n\n      { custom && customMenuOpen &&\n        <div className={props.cssModule.options} ref={customMenu}>\n          {genCustomOptions()}\n        </div>\n      }\n    </div>\n  )\n})\n"]},"metadata":{},"sourceType":"module"}